# Генерация озвучки слогов

Аудиофайлы слогов генерируются с помощью **Silero TTS v4** — российской нейросетевой модели синтеза речи.

## Требования

- Docker

## Голоса

| Голос | Скорость SSML | Описание |
|-------|---------------|----------|
| `aidar` | `slow` | Мужской голос, умеренно медленный |
| `eugene` | `x-slow` | Мужской голос, очень медленный |

## Запуск генерации

Из корня проекта:

```bash
docker run --rm \
  -v "$(pwd)/tts/generate_all.py:/app/generate_all.py" \
  -v "$(pwd)/sounds:/output" \
  python:3.11-slim \
  bash -c "pip install -q torch torchaudio --index-url https://download.pytorch.org/whl/cpu && \
           pip install -q omegaconf scipy numpy && \
           python /app/generate_all.py"
```

Результат: 200 файлов (100 на каждый голос) в `sounds/aidar/` и `sounds/eugene/`.

## Формат имён файлов

Транслитерация кириллицы:

```
Согласные: М→m, Н→n, П→p, Б→b, К→k, Т→t, Д→d, С→s, Л→l, Р→r
Гласные:   А→a, О→o, У→u, И→i, Е→e, Ы→y, Ю→yu, Э→eh, Я→ya, Ё→yo
```

Примеры: `МА` → `ma.wav`, `КЮ` → `kyu.wav`, `НЯ` → `nya.wav`

## Настройка голосов

В `generate_all.py` можно изменить конфигурацию:

```python
CONFIGS = [
    {'speaker': 'aidar', 'rate': 'slow', 'output_dir': '/output/aidar'},
    {'speaker': 'eugene', 'rate': 'x-slow', 'output_dir': '/output/eugene'},
]
```

### Доступные голоса Silero v4

- `aidar` — мужской
- `eugene` — мужской
- `baya` — женский
- `kseniya` — женский
- `xenia` — женский

### Доступные скорости SSML

- `x-slow` — очень медленно
- `slow` — медленно
- `medium` — средне
- `75%`, `85%`, `90%` — проценты от нормальной скорости

## Почему Silero?

1. **Правильное произношение слогов** — Edge TTS и другие движки произносят йотированные гласные (Ю, Я, Ё, Е) побуквенно (КЮ → "К-Э-Й-У")
2. **Открытый исходный код** — MIT лицензия
3. **Работает локально** — не требует API-ключей и интернета (после загрузки модели)
4. **Качественные русские голоса** — модель обучена специально на русском языке
